
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PowerSplit — Color Prototype</title>
<style>
  :root{
    --ink:#0F172A;        /* text / borders */
    --bg:#FFF7ED;         /* sand */
    --card:#FFFFFF;
    --teal:#0EA5A4;       /* primary */
    --indigo:#4F46E5;     /* accent */
    --amber:#F59E0B;      /* warnings / highlights */
    --radius:18px;
    --pad:16px;
    --gap:18px;
  }
  *{box-sizing:border-box;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}
  body{margin:0;background:var(--bg);color:var(--ink)}
  a{color:inherit;text-decoration:none}
  header{
    position:sticky;top:0;background:linear-gradient(90deg,var(--teal),var(--indigo));
    color:#fff;border-bottom:3px solid rgba(0,0,0,.3);
    display:flex;align-items:center;justify-content:space-between;padding:12px 18px;z-index:50
  }
  .brand{font-weight:900;font-size:28px;letter-spacing:.2px}
  nav a{margin:0 10px;padding:6px 12px;border-radius:999px;border:2px solid transparent;color:#fff}
  nav a.active{border-color:#fff;background:rgba(255,255,255,.12)}
  .journeys button{border:2px solid #fff;background:rgba(255,255,255,.14);color:#fff;border-radius:999px;padding:6px 10px;cursor:pointer}
  .journey-menu{position:absolute;right:0;top:40px;background:#fff;border:3px solid var(--ink);border-radius:14px;
    padding:8px;display:none;min-width:320px;box-shadow:6px 6px 0 rgba(15,23,42,.8);color:var(--ink)}
  .journey-menu a{display:block;padding:8px 10px;border-radius:10px}
  .journey-menu a:hover{background:#F1F5F9}
  main{max-width:1100px;margin:24px auto;padding:0 18px}
  section{display:none}
  section.active{display:block}
  .grid{display:grid;grid-template-columns:1fr 360px;gap:var(--gap)}
  .card{background:var(--card);border:3px solid var(--ink);border-radius:var(--radius);padding:var(--pad);box-shadow:6px 6px 0 rgba(15,23,42,.8)}
  .card h2{margin:0 0 6px 0}
  .muted{opacity:.85}
  .row{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
  .btn{border:3px solid var(--ink);background:#fff;border-radius:999px;padding:10px 14px;cursor:pointer;font-weight:800}
  .btn.primary{background:var(--teal);border-color:var(--ink);color:#fff;box-shadow:0 2px 0 rgba(15,23,42,.6)}
  .btn.secondary{background:var(--indigo);color:#fff;border-color:var(--ink)}
  .btn.warn{background:var(--amber);color:#111;border-color:var(--ink)}
  .btn:focus-visible{outline:4px solid #fff;outline-offset:2px}
  select,input[type=text]{border:3px solid var(--ink);border-radius:999px;padding:10px 12px;background:#fff}
  .progress{width:100%;height:44px;border:3px solid var(--ink);border-radius:999px;position:relative;background:#fff;overflow:hidden}
  .progress .fill{position:absolute;left:0;top:0;height:100%;background:linear-gradient(90deg,var(--teal),var(--indigo));transition:width .3s}
  .progress .marker{position:absolute;top:0;bottom:0;width:4px;background:#fff;left:60%}
  .stack{display:grid;gap:var(--gap)}
  ul.clean{list-style:none;margin:0;padding:0}
  .aside .card{min-height:140px}
  .footer-note{margin-top:16px;font-size:13px}
  .notice{background:#FEF3C7;border:3px dashed var(--ink);border-radius:12px;padding:8px 10px;margin:8px 0;font-size:14px}
  .hero{display:grid;grid-template-columns:1fr 1fr;gap:24px;align-items:center}
  .hero h1{font-size:40px;margin:0 0 8px}
  .kicker{font-weight:800;letter-spacing:.08em;font-size:12px;text-transform:uppercase;color:#0f172a}
  .fake-img{border:3px solid var(--ink);border-radius:16px;height:230px;
    background:linear-gradient(135deg,rgba(79,70,229,.15),rgba(14,165,164,.15));
    display:grid;place-items:center;color:#334155;font-weight:700}
  .badge{display:inline-block;background:#E0F2FE;border:2px solid var(--ink);padding:3px 8px;border-radius:999px;font-size:12px;margin-left:6px}
  /* modal */
  .modal-backdrop{position:fixed;inset:0;background:rgba(2,6,23,.35);display:none;align-items:center;justify-content:center;z-index:60}
  .modal{background:#fff;border:3px solid var(--ink);border-radius:18px;max-width:620px;width:96%;padding:16px;box-shadow:8px 8px 0 rgba(15,23,42,.9)}
  .modal h3{margin:0 0 8px}
  .modal .actions{display:flex;gap:10px;justify-content:flex-end;margin-top:12px}
  .pill{border:3px solid var(--ink);border-radius:999px;padding:6px 10px;display:inline-block;margin:4px 6px;cursor:pointer;background:#fff}
  .pill.active{background:var(--indigo);color:#fff}
</style>
</head>
<body>
<header>
  <div class="brand">PowerSplit <span class="badge">Prototype</span></div>
  <nav>
    <a href="#explainer" id="nav-explainer">Explainer</a>
    <a href="#storefront" id="nav-storefront">Storefront</a>
    <a href="#helpdesk" id="nav-helpdesk">Helpdesk</a>
    <a href="#account" id="nav-account">Account</a>
    <a href="#dashboard" id="nav-dashboard">Dashboard</a>
  </nav>
  <div class="journeys">
    <button id="journeyBtn">Journeys ▾</button>
    <div class="journey-menu" id="journeyMenu">
      <a href="#" data-journey="new">1) New visitor → buy → onboard → dashboard</a>
      <a href="#" data-journey="login">2) Existing user → login → dashboard</a>
      <a href="#" data-journey="add-device">3) Add a device (shared/private)</a>
      <a href="#" data-journey="invite">4) Invite a housemate</a>
      <a href="#" data-journey="export">5) Export a statement</a>
    </div>
  </div>
</header>

<main>
  <!-- Explainer -->
  <section id="explainer" class="active">
    <div class="hero">
      <div>
        <div class="kicker">Fair energy for shared homes</div>
        <h1>Pay only for the power you use.</h1>
        <p>PowerSplit measures per‑device usage and fairly splits the bill across housemates—automatically.</p>
        <div class="row">
          <a class="btn primary" href="#storefront">Get the Starter Kit</a>
          <a class="btn secondary" href="#dashboard">Try the demo dashboard</a>
        </div>
      </div>
      <div class="fake-img">Dashboard preview</div>
    </div>
    <div class="stack" style="margin-top:24px">
      <div class="card">
        <h2>How it works</h2>
        <ol>
          <li>Plug smart adapters into high‑usage devices or rooms.</li>
          <li>Pair each device to a person or mark as shared.</li>
          <li>PowerSplit calculates each person’s fair share and lets you settle up.</li>
        </ol>
      </div>
    </div>
  </section>

  <!-- Storefront -->
  <section id="storefront">
    <div class="grid">
      <div class="stack">
        <div class="card">
          <h2>Starter Kit</h2>
          <p>Includes 4 smart plugs + mains clamp + app access. Perfect for a 3–5 person share.</p>
          <div class="row">
            <button class="btn primary" id="addToCart">Add to cart</button>
            <button class="btn" id="viewCart">View cart (0)</button>
          </div>
        </div>
        <div class="card">
          <h2>Add‑ons</h2>
          <ul>
            <li>Extra smart plug</li>
            <li>Spare labels</li>
            <li>PowerSplit Plus (subscription)</li>
          </ul>
        </div>
      </div>
      <div class="aside">
        <div class="card">
          <h2>Cart</h2>
          <div id="cartList" class="muted">Your cart is empty.</div>
          <div class="row" style="margin-top:10px">
            <button class="btn secondary" id="checkoutBtn">Checkout</button>
          </div>
        </div>
        <div class="card">
          <h2>Why PowerSplit?</h2>
          <p>End bill drama with transparent, tamper‑resistant tracking and one‑tap bill splitting.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Helpdesk -->
  <section id="helpdesk">
    <div class="stack">
      <div class="card">
        <h2>Helpdesk</h2>
        <p class="muted">Setup videos · FAQs · Warranty · Returns</p>
        <div class="notice">Tip: This prototype shows flows only—no real data is sent.</div>
        <ul>
          <li><a href="#" onclick="openModal('contact')">Contact support</a></li>
          <li><a href="#" onclick="openModal('faq')">See common questions</a></li>
        </ul>
      </div>
    </div>
  </section>

  <!-- Account -->
  <section id="account">
    <div class="grid">
      <div class="stack">
        <div class="card">
          <h2>Create account</h2>
          <div class="row"><input id="newName" type="text" placeholder="Full name"/><input id="newEmail" type="text" placeholder="Email"/></div>
          <div class="row" style="margin-top:10px">
            <button class="btn primary" id="createAccountBtn">Create account</button>
          </div>
          <div class="footer-note muted">Creating an account also creates your first property for the demo.</div>
        </div>
      </div>
      <div class="aside">
        <div class="card">
          <h2>Login</h2>
          <div class="row"><input id="loginEmail" type="text" placeholder="Email"/></div>
          <div class="row" style="margin-top:10px">
            <button class="btn secondary" id="loginBtn">Login</button>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Dashboard -->
  <section id="dashboard">
    <div class="row" style="margin-bottom:12px">
      <div class="row">
        <label class="muted">Property:&nbsp;</label>
        <select id="propertySelect"></select>
      </div>
      <button class="btn secondary" id="addDeviceBtn">Add device</button>
    </div>

    <div class="grid">
      <div class="stack">
        <div class="card">
          <h2>Your share this month <span class="muted" style="float:right">£<span id="myShare">—</span></span></h2>
          <div class="muted">People &amp; amounts</div>
          <div class="progress" aria-label="share bar">
            <div class="fill" id="shareFill" style="width:60%"></div>
            <div class="marker"></div>
          </div>
          <div class="muted" style="margin-top:8px">Last month vs now: <span id="deltaText">+£3.20</span></div>
          <div class="row" style="margin-top:10px">
            <button class="btn primary" id="settleBtn">Settle up</button>
          </div>
        </div>

        <div class="card">
          <h2>Device insights</h2>
          <ul id="deviceList" class="clean"></ul>
        </div>
      </div>

      <div class="aside">
        <div class="card">
          <h2>Energy coach</h2>
          <div id="coachTip">Run the bedroom heater only to 19–20°C. Expected saving: £4.50/mo.</div>
          <div class="row" style="margin-top:10px">
            <button class="btn warn" id="applyTipBtn">Apply tip</button>
          </div>
        </div>

        <div class="card">
          <h2>Household</h2>
          <ul id="peopleList" class="clean"></ul>
          <div class="row" style="margin-top:10px">
            <button class="btn secondary" id="inviteBtn">Invite member</button>
          </div>
        </div>

        <div class="card">
          <h2>Export</h2>
          <p class="muted">Download a statement for your landlord or house chat.</p>
          <div class="row">
            <button class="btn" id="exportCsvBtn">Export CSV</button>
            <button class="btn" id="exportPdfBtn">Export PDF</button>
          </div>
        </div>
      </div>
    </div>
  </section>
</main>

<!-- Modals -->
<div class="modal-backdrop" id="backdrop">
  <div class="modal" id="modal">
    <h3 id="modalTitle">Modal</h3>
    <div id="modalBody">Body</div>
    <div class="actions">
      <button class="btn" onclick="closeModal()">Close</button>
      <button class="btn primary" id="modalPrimary">OK</button>
    </div>
  </div>
</div>

<script>
  const state = {
    cartCount: 0,
    properties: [{id:'p1', name:'Flat 12, King Street'}],
    activeProperty: 'p1',
    people: [
      {id:'u1', name:'You'},
      {id:'u2', name:'Sam'},
      {id:'u3', name:'Riley'}
    ],
    devices: [
      {id:'d1', name:'Space heater', owner:'u1', shared:false, kwh:42},
      {id:'d2', name:'PC / Monitor', owner:'u2', shared:false, kwh:20},
      {id:'d3', name:'Fridge / Lights', owner:'shared', shared:true, kwh:30}
    ],
    myShare: 36.80,
    previousShare: 33.60
  };

  function setActive(hash){
    if(!hash) hash = '#explainer';
    document.querySelectorAll('nav a').forEach(a=>a.classList.remove('active'));
    const nav = document.querySelector('#nav-'+hash.replace('#',''));
    if(nav) nav.classList.add('active');
    document.querySelectorAll('main section').forEach(s=>s.classList.remove('active'));
    const sec = document.querySelector(hash);
    if(sec) sec.classList.add('active');
    if(hash==='#dashboard'){ renderDashboard(); }
  }
  window.addEventListener('hashchange', ()=>setActive(location.hash));
  setActive(location.hash);

  // Journeys menu
  const btn = document.getElementById('journeyBtn');
  const menu = document.getElementById('journeyMenu');
  btn.addEventListener('click', ()=>menu.style.display = (menu.style.display==='block'?'none':'block'));
  document.addEventListener('click', (e)=>{
    if(!menu.contains(e.target) && e.target!==btn){ menu.style.display='none'; }
  });
  menu.querySelectorAll('a').forEach(a=>a.addEventListener('click',(e)=>{
    e.preventDefault();
    const j = a.dataset.journey;
    runJourney(j);
  }));

  // Storefront
  document.getElementById('addToCart').addEventListener('click',()=>{
    state.cartCount++;
    document.getElementById('viewCart').textContent = `View cart (${state.cartCount})`;
    document.getElementById('cartList').textContent = `${state.cartCount} × Starter Kit`;
  });
  document.getElementById('checkoutBtn').addEventListener('click',()=>openModal('checkout'));
  document.getElementById('viewCart').addEventListener('click',()=>openModal('cart'));

  // Account
  document.getElementById('createAccountBtn').addEventListener('click',()=>{
    location.hash='#dashboard';
    alert('Account created. Welcome to PowerSplit!');
  });
  document.getElementById('loginBtn').addEventListener('click',()=>{
    location.hash='#dashboard';
    alert('Logged in. Loading your dashboard…');
  });

  // Dashboard rendering
  function renderDashboard(){
    const sel = document.getElementById('propertySelect');
    sel.innerHTML = state.properties.map(p=>`<option value="${p.id}" ${p.id===state.activeProperty?'selected':''}>${p.name}</option>`).join('');
    document.getElementById('myShare').textContent = state.myShare.toFixed(2);
    const pct = Math.min(100, Math.max(5, (state.myShare/60)*100));
    document.getElementById('shareFill').style.width = pct+'%';
    const delta = state.myShare - state.previousShare;
    document.getElementById('deltaText').textContent = (delta>=0?'+':'')+'£'+Math.abs(delta).toFixed(2);

    // Devices
    const devList = document.getElementById('deviceList');
    devList.innerHTML='';
    state.devices.forEach(d=>{
      const who = d.shared ? 'Shared' : (state.people.find(p=>p.id===d.owner)||{}).name || '—';
      const li = document.createElement('li');
      li.style.margin='8px 0';
      li.innerHTML = `<strong>${d.name}</strong> — ${d.kwh} kWh · <em>${who}</em>`;
      devList.appendChild(li);
    });

    // People
    const ppl = document.getElementById('peopleList');
    ppl.innerHTML='';
    state.people.forEach(p=>{
      const li = document.createElement('li');
      li.textContent = p.name;
      ppl.appendChild(li);
    });
  }
  renderDashboard();

  // Actions
  document.getElementById('settleBtn').addEventListener('click',()=>openModal('settle'));
  document.getElementById('applyTipBtn').addEventListener('click',()=>{
    state.myShare = Math.max(0, state.myShare - 4.5);
    renderDashboard();
    alert('Tip applied. Estimated saving £4.50/mo');
  });
  document.getElementById('addDeviceBtn').addEventListener('click',()=>openModal('addDevice'));
  document.getElementById('inviteBtn').addEventListener('click',()=>openModal('invite'));
  document.getElementById('exportCsvBtn').addEventListener('click', ()=> exportFile('csv'));
  document.getElementById('exportPdfBtn').addEventListener('click', ()=> exportFile('pdf'));

  // Modal logic
  const backdrop = document.getElementById('backdrop');
  const modalTitle = document.getElementById('modalTitle');
  const modalBody = document.getElementById('modalBody');
  const modalPrimary = document.getElementById('modalPrimary');
  function closeModal(){ backdrop.style.display='none'; }
  function openModal(kind){
    backdrop.style.display='flex';
    modalPrimary.onclick = closeModal;
    if(kind==='cart'){
      modalTitle.textContent='Your cart';
      modalBody.innerHTML = `${state.cartCount||0} × Starter Kit`;
      modalPrimary.textContent='Checkout';
      modalPrimary.onclick=()=>{ closeModal(); openModal('checkout'); };
    }
    if(kind==='checkout'){
      modalTitle.textContent='Checkout';
      modalBody.innerHTML = `<div class="notice">Prototype checkout — no payment required.</div>
      <p>Shipping to: <em>Flat 12, King Street</em></p>`;
      modalPrimary.textContent='Place order';
      modalPrimary.onclick=()=>{ closeModal(); alert('Order placed! We’ll email setup steps.'); location.hash='#account'; };
    }
    if(kind==='settle'){
      modalTitle.textContent='Settle up';
      modalBody.innerHTML = `<p>You owe <strong>£${state.myShare.toFixed(2)}</strong> this month.</p>
      <div class="row"><span class="pill active">Monzo</span><span class="pill">PayPal</span><span class="pill">Bank</span></div>
      <div class="notice">This opens your payment app in the real product. Here it just confirms.</div>`;
      modalPrimary.textContent='Mark as paid';
      modalPrimary.onclick=()=>{ closeModal(); alert('Marked as paid for this demo.'); };
    }
    if(kind==='addDevice'){
      modalTitle.textContent='Add device';
      const peopleOptions = state.people.map(p=>`<option value="${p.id}">${p.name}</option>`).join('');
      modalBody.innerHTML = `
      <label>Name</label><br/>
      <input id="dvName" type="text" placeholder="e.g., Kettle" style="width:100%;margin:6px 0 10px"><br/>
      <div class="row"><span class="pill active" id="pPrivate">Private</span><span class="pill" id="pShared">Shared</span></div>
      <div id="ownerRow" class="row" style="margin-top:8px">
        <label>Owner:&nbsp;</label>
        <select id="dvOwner">${peopleOptions}</select>
      </div>`;
      setTimeout(()=>{
        const priv = document.getElementById('pPrivate');
        const sh = document.getElementById('pShared');
        priv.onclick=()=>{ priv.classList.add('active'); sh.classList.remove('active'); document.getElementById('ownerRow').style.display='flex'; };
        sh.onclick=()=>{ sh.classList.add('active'); priv.classList.remove('active'); document.getElementById('ownerRow').style.display='none'; };
      },0);
      modalPrimary.textContent='Add';
      modalPrimary.onclick=()=>{
        const name = document.getElementById('dvName').value.trim() || 'New device';
        const isShared = document.getElementById('pShared').classList.contains('active');
        const owner = isShared ? 'shared' : (document.getElementById('dvOwner').value);
        state.devices.push({id:'d'+(state.devices.length+1), name, owner, shared:isShared, kwh: Math.floor(Math.random()*25)+5});
        closeModal(); renderDashboard();
      };
    }
    if(kind==='invite'){
      modalTitle.textContent='Invite a housemate';
      const code = Math.random().toString(36).slice(2,8).toUpperCase();
      modalBody.innerHTML = `<p>Share this invite link with your housemate:</p>
      <div class="notice">https://demo.powersplit/join?code=${code}</div>
      <div class="row"><input id="newMate" type="text" placeholder="New member name"></div>`;
      modalPrimary.textContent='Add to list';
      modalPrimary.onclick=()=>{
        const nm = document.getElementById('newMate').value.trim();
        if(nm){
          state.people.push({id:'u'+(state.people.length+1), name:nm});
          closeModal(); renderDashboard();
        }else{
          alert('Enter a name to add.');
        }
      };
    }
    if(kind==='contact'){
      modalTitle.textContent='Contact support';
      modalBody.innerHTML = `<p>Email us at help@powersplit.example</p>`;
      modalPrimary.textContent='OK';
    }
    if(kind==='faq'){
      modalTitle.textContent='FAQs';
      modalBody.innerHTML = `<ul><li>How do shared devices work? — We split them evenly by default; you can edit ratios.</li>
      <li>Can I export my data? — Yes, CSV/PDF from the dashboard.</li></ul>`;
      modalPrimary.textContent='Close';
    }
  }

  // Export
  function exportFile(kind){
    const rows = [
      ['Period','2025-10-01 to 2025-10-31'],
      ['Property', state.properties.find(p=>p.id===state.activeProperty).name],
      [],
      ['Person','Amount (£)'],
      ...state.people.map(p=>[p.name, (Math.random()*30+10).toFixed(2)])
    ];
    if(kind==='csv'){
      const csv = rows.map(r=>r.join(',')).join('\n');
      const blob = new Blob([csv], {type:'text/csv'});
      const url = URL.createObjectURL(blob);
      triggerDownload(url, 'PowerSplit_statement.csv');
    }else{
      const text = `PowerSplit Statement\n\n${rows.map(r=>r.join('  ')).join('\n')}`;
      const blob = new Blob([text], {type:'application/pdf'});
      const url = URL.createObjectURL(blob);
      triggerDownload(url, 'PowerSplit_statement.pdf');
    }
  }
  function triggerDownload(url, filename){
    const a = document.createElement('a');
    a.href = url; a.download = filename; document.body.appendChild(a); a.click(); a.remove();
    setTimeout(()=>URL.revokeObjectURL(url), 2000);
  }

  // Journey runner
  function runJourney(key){
    if(key==='new'){
      location.hash='#explainer';
      setTimeout(()=>{ location.hash='#storefront'; }, 800);
      setTimeout(()=>{ document.getElementById('addToCart').click(); }, 1400);
      setTimeout(()=>{ document.getElementById('checkoutBtn').click(); }, 2000);
    }
    if(key==='login'){
      location.hash='#account';
      setTimeout(()=>{ document.getElementById('loginBtn').click(); }, 1200);
    }
    if(key==='add-device'){
      location.hash='#dashboard';
      setTimeout(()=>{ document.getElementById('addDeviceBtn').click(); }, 800);
    }
    if(key==='invite'){
      location.hash='#dashboard';
      setTimeout(()=>{ document.getElementById('inviteBtn').click(); }, 800);
    }
    if(key==='export'){
      location.hash='#dashboard';
      setTimeout(()=>{ document.getElementById('exportPdfBtn').click(); }, 1000);
    }
  }
</script>
</body>
</html>
